<?php $group = json_decode('{"id":1813582,"name":"Senate","created_at":"2015-07-03T10:59:16.000-04:00","updated_at":"2016-05-16T15:22:33.000-04:00","memberships":[{"id":11816865,"name":"Joshua Massey","email_address":"joshua.massey@umbc.edu","admin":true,"created_at":"2015-07-03T10:33:55.000-04:00","updated_at":"2016-06-09T10:07:02.000-04:00","trashed":false,"identity_id":11014750,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/global\/56e0a6b1288285b75f31eb1a04429f590010\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/global\/56e0a6b1288285b75f31eb1a04429f590010\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/11816865.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/11816865"},{"id":13421727,"name":"Collin Sullivan","email_address":"csulli1@umbc.edu","admin":false,"created_at":"2016-02-18T16:53:38.000-05:00","updated_at":"2016-05-23T18:43:22.000-04:00","trashed":false,"identity_id":11956724,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/global\/36952fd3e3bd57045ea88ce0fc1cd4b40010\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/global\/36952fd3e3bd57045ea88ce0fc1cd4b40010\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13421727.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13421727"},{"id":11817613,"name":"Sarah Lilly","email_address":"slilly1@umbc.edu","admin":false,"created_at":"2015-07-03T12:26:39.000-04:00","updated_at":"2016-05-19T09:54:55.000-04:00","trashed":false,"identity_id":11604768,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/global\/0b6b8edc68c4fc4eed53136a502a9a680010\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/global\/0b6b8edc68c4fc4eed53136a502a9a680010\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/11817613.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/11817613"},{"id":13475478,"name":"Evan Leiter-Mason","email_address":"leiter1@umbc.edu","admin":false,"created_at":"2016-03-01T18:05:20.000-05:00","updated_at":"2016-05-16T17:44:20.000-04:00","trashed":false,"identity_id":13306298,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_8\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_8\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13475478.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13475478"},{"id":11816860,"name":"Matthew Landen","email_address":"mlanden@umbc.edu","admin":true,"created_at":"2015-07-03T10:32:39.000-04:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":11467575,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/11816860.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/11816860"},{"id":13421893,"name":"Geovanny Cabrera","email_address":"cabkleb1@umbc.edu","admin":false,"created_at":"2016-02-18T17:14:15.000-05:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":13213921,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_3\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_3\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13421893.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13421893"},{"id":13475480,"name":"Rebecca Postowski","email_address":"rpost1@umbc.edu","admin":false,"created_at":"2016-03-01T18:05:51.000-05:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":9476419,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/global\/8157413040dc3afe3717447bc4787def0010\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/global\/8157413040dc3afe3717447bc4787def0010\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13475480.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13475480"},{"id":13475530,"name":"Jessica Sackey","email_address":"sackeyj1@umbc.edu","admin":false,"created_at":"2016-03-01T18:09:17.000-05:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":13362205,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13475530.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13475530"},{"id":13421770,"name":"Brooke Perrin","email_address":"aperrin1@umbc.edu","admin":false,"created_at":"2016-02-18T17:01:42.000-05:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":13226612,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_0\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13421770.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13421770"},{"id":13421771,"name":"Ted Sakellariou","email_address":"kw96535@umbc.edu","admin":false,"created_at":"2016-02-18T17:01:42.000-05:00","updated_at":"2016-03-11T17:55:21.000-05:00","trashed":false,"identity_id":13226342,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_1\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_1\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13421771.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13421771"},{"id":13421772,"name":"Pandora Wilson","email_address":"pando1@umbc.edu","admin":false,"created_at":"2016-02-18T17:01:42.000-05:00","updated_at":"2016-05-15T21:19:34.000-04:00","trashed":false,"identity_id":13418495,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/builtin\/default_avatar_v1_2\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/builtin\/default_avatar_v1_2\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13421772.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13421772"},{"id":13449209,"name":"Bradley Ingram","email_address":"bradley.ingram@umbc.edu","admin":false,"created_at":"2016-02-24T18:20:17.000-05:00","updated_at":"2016-06-09T10:07:02.000-04:00","trashed":false,"identity_id":13345384,"can_create_projects":true,"avatar_url":"http:\/\/cdn.37img.com\/global\/15ecf17523255eb21229c2d42cddb6650010\/avatar.gif?r=3","fullsize_avatar_url":"https:\/\/cdn.37img.com\/global\/15ecf17523255eb21229c2d42cddb6650010\/original.gif?r=3","url":"https:\/\/basecamp.com\/2979808\/api\/v1\/people\/13449209.json","app_url":"https:\/\/basecamp.com\/2979808\/people\/13449209"}]}'); ?>
<!DOCTYPE html>
<html>
<head>
	<?php
	include("includes/web-header.php");
	?>
	<title>All People by Department | UMBC SGA iTracker</title>
</head>
<body class="hold-transition skin-yellow sidebar-mini">
	<div class="wrapper">

		<header class="main-header">
			<?php
			include("includes/header.php");
			?>
		</header>

		<!-- Left side column. contains the logo and sidebar -->
		<aside class="main-sidebar">
			<!-- sidebar: style can be found in sidebar.less -->
			<section class="sidebar">
				<?php
				include("includes/sidebar.php");
				?>
			</section>
			<!-- /.sidebar -->
		</aside>

		<!-- Content Wrapper. Contains page content -->
		<div class="content-wrapper">
			<!-- Content Header (Page header) -->
			<section class="content-header">
				<h1>
					All People By Department
				</h1>
				<ol class="breadcrumb">
					<li><a href="/itracker/"><i class="fa fa-home"></i> Home</a></li>
					<li>People</li>
					<li class="active">By Department</li>
				</ol>
			</section>

			<!-- Main content -->
			
			<section class="content-header">
 				<h6>Jump To: <?php
 				for ($m=0; $m<sizeof($groupData); $m++) {
 					$groupID = str_replace("&", "and", str_replace(" ", "-", strtolower($groupData[$m]["name"])));
 				?>
 					<a href="#<?php echo($groupID); ?>" > <? echo($groupData[$m]["name"]); ?> | </a>
 				<?php
 				}
 				?>
 				</h6>
 			</section>

			<section class="content">
				<!-- Small boxes (Stat box) -->
				<?php
				for($i=0; $i<sizeof($groupData); $i++) {
					$members = json_decode(file_get_contents("data/departments/" . $groupData[$i]["id"] . "/people.json", FILE_USE_INCLUDE_PATH), true);
					$groupID = str_replace("&", "and", str_replace(" ", "-", strtolower($groupData[$i]["name"])));
					?>

					<h2 id=<?php echo($groupID); ?>><?php echo($groupData[$i]["name"]); ?></h2>
					<?php
					usort($members, 'compareName');

					for ($j=0; $j<sizeof($members); $j++) {
						$person = json_decode(file_get_contents("data/people/" . $members[$j] . "/info.json", FILE_USE_INCLUDE_PATH), true);
						if ( ($j%3 == 0) ) {
							?>
							<div class="row">
								<?php
							}
							?>
							<div class="col-md-4">
								<!-- Widget: user widget style 1 -->
								<div class="box box-widget widget-user-2">

									<?php
									$name = $person["name"];
									$email = $person["email_address"];
									$photo = $person["avatar_url"];
									

									$personProjs = json_decode(file_get_contents("data/people/" . $person["id"] . "/projects.json", FILE_USE_INCLUDE_PATH), true);

									$numActive = 0;
									$numArchived = 0;
									for ($k=0; $k<sizeof($personProjs); $k++) {
										if (($personProjs[$k]["trashed"] == False) && ($personProjs[$k]["template"] == False)) {
											if ($personProjs[$k]["archived"] == False) {
												$numActive++;
											} else {
												$numArchived++;
											}
										}
									}

									$assignedTasks = $person["assigned_todos"]["count"];
									?>

									<!-- Add the bg color to the header using any of the bg-* classes -->
									<div class="widget-user-header bg-blue">
										<div class="widget-user-image">
											<img class="img-circle" src=<?php echo($photo); ?> alt="User Avatar">
										</div><!-- /.widget-user-image -->
										<h3 class="widget-user-username"><?php echo($name); ?></h3>
										<h5 class="widget-user-desc"><!--<a href=<?php echo("mailto:".$email); ?>>--><?php echo($email); ?><!--</a>--></h5>
									</div>
									<div class="box-footer no-padding">
										<ul class="nav nav-stacked">
											<li><a href="#">Projects <span class="pull-right badge bg-blue"><?php echo($numActive); ?></span></a></li>
											<li><a href="#">Tasks <span class="pull-right badge bg-aqua"><?php echo($assignedTasks); ?></span></a></li>
											<li><a href="#">Archived Projects <span class="pull-right badge bg-green"><?php echo($numArchived); ?></span></a></li>
											<!-- <li><a href="#">Followers <span class="pull-right badge bg-red">!!!</span></a></li> -->
										</ul>
									</div>
								</div><!-- /.widget-user -->
							</div><!-- /.col -->
							<?php
                			//  row tag closures
							if ( ($j%3 == 2) || ($j == sizeof($members)-1) ) {
								?>
							</div>
							<?php
						}
					}
				}
				?>
			</section><!-- /.content -->
		</div><!-- /.content-wrapper -->
		<footer class="main-footer">
			<?php
			include("includes/footer.php");
			?>
		</footer>

      <!-- Add the sidebar's background. This div must be placed
      immediately after the control sidebar -->
      <div class="control-sidebar-bg"></div>
  </div><!-- ./wrapper -->

  <?php
  include("includes/web-footer.php");
  ?>

</body>
</html>
